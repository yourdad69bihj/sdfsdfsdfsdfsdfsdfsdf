<!DOCTYPE html>
<html>
<head>
    <title>Jordan's Menu | Key Verification</title>
    <style>
        body { background: #0a0a0a; color: white; font-family: 'Inter', sans-serif; text-align: center; padding-top: 100px; }
        .card { background: #111; padding: 40px; border-radius: 15px; border: 2px solid #ff0000; display: inline-block; width: 400px; }
        h1 { color: #ff0000; margin: 0; }
        .key-box { background: #000; padding: 20px; font-size: 32px; color: #ff0000; font-family: monospace; margin: 20px 0; border: 1px dashed #444; }
        button { background: #ff0000; color: white; border: none; padding: 15px 30px; border-radius: 5px; cursor: pointer; font-weight: bold; width: 100%; font-size: 18px; }
        .timer { color: #666; font-size: 12px; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="card">
        <h1>JORDAN'S MENU</h1>
        <p id="instruction">Click below to start the verification process.</p>
        
        <div id="keyArea" style="display:none;">
            <p>Your Key:</p>
            <div class="key-box" id="keyDisplay">LOADING...</div>
            <button onclick="copyKey()">COPY KEY</button>
        </div>

        <button id="verifyBtn" onclick="startVerify()">VERIFY (GET KEY)</button>
        <p class="timer">Verification takes ~30 seconds.</p>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('id');
        const isFinished = urlParams.get('finished'); // This is sent back by Linkvertise

        if (isFinished === "true" && userId) {
            document.getElementById('verifyBtn').style.display = "none";
            document.getElementById('instruction').style.display = "none";
            document.getElementById('keyArea').style.display = "block";
            
            // MATH: (ID + 67) reversed
            let key = (parseInt(userId) + 67).toString().split("").reverse().join("");
            document.getElementById('keyDisplay').innerText = key;
        }

        function startVerify() {
            // REPLACE THIS with your actual Linkvertise Link!
            // Set your Linkvertise "Target URL" to: https://yourname.github.io/jordans-menu/?id=USERID&finished=true
            window.location.href = "https://link-target.net/your-link-id/jordan-key"; 
        }

        function copyKey() {
            navigator.clipboard.writeText(document.getElementById('keyDisplay').innerText);
            alert("Key Copied!");
        }
    </script>
</body>
</html>